# CLI リファレンス

このページは `motion-plus-installer` CLI の主要オプションと使用例をまとめたリファレンスです。

## 基本コマンド

::: tip
ローカルにインストールしている場合は `./node_modules/.bin/motion-plus-installer` を直接利用できます。グローバルにインストールしている場合は `motion-plus-installer --help` で確認してください。
:::

## オプション（一覧）

| オプション                      | 説明                                                                                                                              |               デフォルト |
| ------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- | -----------------------: |
| `-p`, `--package <name>`        | インストール対象のパッケージ名（例: `motion-plus`）                                                                               |            `motion-plus` |
| `-v`, `--pkg-version <version>` | 取得したいパッケージのバージョン。未指定時は環境変数 `MOTION_VERSION` や内部の既定値 (`2.0.0-alpha.4`) を利用して自動決定します。 |                   `auto` |
| `-s`, `--storage <subdir>`      | ダウンロードキャッシュの保存先（`node_modules` 内のサブディレクトリ）                                                             | `.motion-plus-installer` |
| `-t`, `--token <token>`         | API へ渡す Bearer トークン（未指定の場合は環境変数 `MOTION_TOKEN` を参照。未設定だと実行時にエラーになります）                    |                  `false` |
| `--keep` / `--no-keep`          | ダウンロードした `.tgz` を保持する / 削除する                                                                                     |                   `true` |
| `--force`                       | 既存キャッシュを上書きして再ダウンロードする                                                                                      |                  `false` |
| `--retry <n>`                   | ダウンロードの再試行回数                                                                                                          |                      `2` |
| `--out <path>`                  | ダウンロードした `.tgz` を指定パスへ直接出力する（`node_modules` の自動接頭なし）                                                 |                  `false` |
| `--pm-cmd <cmd>`                | 使用するパッケージマネージャコマンドを明示（例: `pnpm`, `npm`, `yarn`）。未指定時は自動検出を行います（既定: `pnpm`）。           |                   `auto` |
| `--proxy <url>`                 | HTTP(S) プロキシを指定（実行時に `HTTP_PROXY` / `HTTPS_PROXY` 環境変数も設定されます）                                            |                  `false` |
| `-q`, `--quiet`                 | ログ出力を抑えて最小化する                                                                                                        |                  `false` |
| `--no-pretty`                   | 色付けやパス短縮などの「見た目」機能を無効化する                                                                                  |                  `false` |
| `-h`, `--help`                  | ヘルプを表示する（commander 標準）                                                                                                |                  `false` |

## 実行前の確認

- `MOTION_TOKEN` を用意していることを確認してください。
- 対象パッケージとバージョンを事前に確認してください。
- CI 環境では `MOTION_TOKEN` をシークレットに登録してください。

詳細な環境変数や設定方法については [環境変数と設定](./configuration) を参照してください。

## 実行例

実際のコマンド例（`npx` / `pnpm dlx`、`.env` 例、CI スニペットなど）は、サイトの [利用方法](./usage) ページに集約しています。
